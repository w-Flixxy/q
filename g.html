<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Funny Games Hub</title>
  <style>
    /* Global Reset & Layout */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #eaeaea;
      color: #333;
      line-height: 1.6;
    }
    header {
      background: linear-gradient(135deg, #007acc, #005f99);
      color: #fff;
      text-align: center;
      padding: 1em;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
    nav {
      background: #005f99;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
    }
    nav a {
      color: #fff;
      text-decoration: none;
      padding: 12px 20px;
      margin: 5px;
      border-radius: 5px;
      background: #007acc;
      transition: background 0.3s;
    }
    nav a:hover { background: #004f80; }
    .container {
      max-width: 1000px;
      margin: 20px auto;
      padding: 20px;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    .game-section { display: none; }
    .game-section.active { display: block; }
    button {
      padding: 10px 15px;
      margin: 10px 5px;
      border: none;
      border-radius: 5px;
      background: #007acc;
      color: #fff;
      cursor: pointer;
      transition: background 0.3s;
    }
    button:hover { background: #005f99; }
    @media (max-width: 768px) {
      .container { margin: 10px; padding: 15px; }
      nav { flex-direction: column; }
    }
    /* Idle Miner Styles */
    #idleMinerSection h2 { text-align: center; margin-bottom: 10px; }
    #mineArea {
      width: 100%;
      height: 200px;
      background: linear-gradient(135deg, #555, #333);
      border: 2px solid #222;
      border-radius: 10px;
      position: relative;
      margin-bottom: 15px;
      cursor: pointer;
      overflow: hidden;
    }
    /* A large miner icon in the center */
    #mineArea .minerIcon {
      position: absolute;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      font-size: 4em;
      pointer-events: none;
      user-select: none;
    }
    /* Floating coin animation */
    .coin {
      position: absolute;
      font-size: 1.5em;
      pointer-events: none;
      animation: floatUp 1s ease-out forwards;
    }
    @keyframes floatUp {
      0% { opacity: 1; transform: translateY(0); }
      100% { opacity: 0; transform: translateY(-50px); }
    }
    .idleStats { text-align: center; margin-bottom: 10px; }
    .idleStats span { font-size: 1.2em; margin: 0 10px; }

    /* Higher/Lower Card Styles */
    #higherLowerSection { text-align: center; }
    #hlCard {
      width: 150px;
      height: 200px;
      margin: 20px auto;
      background: #fff;
      border: 4px solid #007acc;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 3em;
      perspective: 1000px;
    }
    /* Simple flip animation */
    #hlCard.flip {
      animation: flipCard 0.6s forwards;
    }
    @keyframes flipCard {
      0% { transform: rotateY(0deg); }
      50% { transform: rotateY(90deg); }
      100% { transform: rotateY(0deg); }
    }
    #hlButtons { margin-top: 10px; }
    #hlButtons button { font-size: 1.5em; padding: 15px 20px; }

    /* Plinko Styles */
    #plinkoSection { text-align: center; }
    #plinkoCanvas {
      border: 2px solid #007acc;
      border-radius: 10px;
      background: #fafafa;
      display: block;
      margin: 0 auto 10px;
    }
    #plinkoScoreDisplay { margin: 10px; font-size: 1.2em; }

    /* Slot Machine Styles */
    #slotMachineSection { text-align: center; }
    #slotMachine {
      display: flex;
      justify-content: center;
      margin: 20px 0;
    }
    .reel {
      width: 80px;
      height: 80px;
      border: 2px solid #007acc;
      border-radius: 10px;
      margin: 0 10px;
      font-size: 3em;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #fafafa;
    }
    #slotBalanceDisplay { margin: 10px 0; font-size: 1.2em; }
    #slotResult { font-size: 1.4em; margin-top: 10px; }
    #slotControls { margin: 10px 0; }
  </style>
</head>
<body>
  <header>
    <h1>Funny Games Hub</h1>
  </header>
  <nav>
    <a href="#" data-target="aboutSection">About</a>
    <a href="#" data-target="idleMinerSection">Idle Miner</a>
    <a href="#" data-target="higherLowerSection">Higher/Lower</a>
    <a href="#" data-target="plinkoSection">Plinko</a>
    <a href="#" data-target="slotMachineSection">Slot Machine</a>
  </nav>
  <div class="container">
    <!-- About Section -->
    <div id="aboutSection" class="game-section active">
      <h2>Welcome to the Funny Games Hub!</h2>
      <p>Enjoy our visually enhanced games. Tap the miner to mine coins, flip the card to guess higher or lower, drop a ball in Plinko and watch it bounce realistically, or try your luck on the slot machine with three spinning reels!</p>
    </div>

    <!-- Idle Miner Game Section -->
    <div id="idleMinerSection" class="game-section">
      <h2>Idle Miner</h2>
      <div id="mineArea">
        <div class="minerIcon">‚õèÔ∏è</div>
      </div>
      <div class="idleStats">
        <span>Coins: <span id="idleCoins">0</span></span>
        <span>Power: <span id="idleClickPower">1</span></span>
        <span>Miners: <span id="idleMiners">0</span></span>
      </div>
      <div style="text-align:center;">
        <button id="upgradePickaxeButton">Upgrade Pickaxe<br>(Cost: <span id="pickaxeCost">10</span>)</button>
        <button id="hireMinerButton">Hire Miner<br>(Cost: <span id="minerCost">50</span>)</button>
        <button id="resetIdleButton" style="background:#cc0000;">Reset</button>
      </div>
    </div>

    <!-- Higher/Lower Game Section -->
    <div id="higherLowerSection" class="game-section">
      <h2>Higher/Lower</h2>
      <div id="hlCard">0</div>
      <div id="hlScoreDisplay">Score: <span id="hlScore">0</span></div>
      <div id="hlButtons">
        <button id="higherButton">‚ñ≤</button>
        <button id="lowerButton">‚ñº</button>
        <button id="resetHLButton" style="background:#cc0000;">Reset</button>
      </div>
    </div>

    <!-- Plinko Game Section -->
    <div id="plinkoSection" class="game-section">
      <h2>Plinko</h2>
      <canvas id="plinkoCanvas" width="400" height="600"></canvas>
      <div id="plinkoScoreDisplay">Plinko Score: <span id="plinkoScore">0</span></div>
      <button id="dropBallButton">Drop Ball</button>
      <button id="resetPlinkoButton" style="background:#cc0000;">Reset</button>
    </div>

    <!-- Slot Machine Game Section -->
    <div id="slotMachineSection" class="game-section">
      <h2>Slot Machine</h2>
      <div id="slotBalanceDisplay">Balance: <span id="slotBalance">100</span></div>
      <div id="slotControls">
        <label for="betAmount">Bet Amount:</label>
        <input type="number" id="betAmount" value="10" min="1" style="width:60px;">
      </div>
      <div id="slotMachine">
        <div class="reel" id="reel1">üçí</div>
        <div class="reel" id="reel2">üçí</div>
        <div class="reel" id="reel3">üçí</div>
      </div>
      <button id="spinSlotButton">Spin</button>
      <div id="slotResult"></div>
    </div>
  </div>

  <script>
    /*******************************
     * Navigation
     *******************************/
    document.querySelectorAll('nav a').forEach(link => {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        const target = this.getAttribute('data-target');
        document.querySelectorAll('.game-section').forEach(section => {
          section.classList.remove('active');
        });
        document.getElementById(target).classList.add('active');
      });
    });

    /*******************************
     * Idle Miner Game
     *******************************/
    let idleData = {
      coins: 0,
      clickPower: 1,
      miners: 0,
      pickaxeCost: 10,
      minerCost: 50
    };

    function loadIdleData() {
      const saved = localStorage.getItem('idleMinerData');
      if (saved) idleData = JSON.parse(saved);
      updateIdleDisplay();
    }
    function saveIdleData() {
      localStorage.setItem('idleMinerData', JSON.stringify(idleData));
    }
    function updateIdleDisplay() {
      document.getElementById('idleCoins').innerText = Math.floor(idleData.coins);
      document.getElementById('idleClickPower').innerText = idleData.clickPower;
      document.getElementById('idleMiners').innerText = idleData.miners;
      document.getElementById('pickaxeCost').innerText = Math.floor(idleData.pickaxeCost);
      document.getElementById('minerCost').innerText = Math.floor(idleData.minerCost);
    }

    // Click mining with a floating coin animation
    document.getElementById('mineArea').addEventListener('click', function(e) {
      idleData.coins += idleData.clickPower;
      updateIdleDisplay();
      saveIdleData();
      const coin = document.createElement('div');
      coin.className = 'coin';
      coin.innerText = 'üí∞';
      const rect = this.getBoundingClientRect();
      coin.style.left = (e.clientX - rect.left) + 'px';
      coin.style.top = (e.clientY - rect.top) + 'px';
      this.appendChild(coin);
      coin.addEventListener('animationend', () => coin.remove());
    });

    document.getElementById('upgradePickaxeButton').addEventListener('click', function() {
      if (idleData.coins >= idleData.pickaxeCost) {
        idleData.coins -= idleData.pickaxeCost;
        idleData.clickPower += 1;
        idleData.pickaxeCost *= 1.5;
        updateIdleDisplay();
        saveIdleData();
      } else {
        alert("Not enough coins!");
      }
    });
    document.getElementById('hireMinerButton').addEventListener('click', function() {
      if (idleData.coins >= idleData.minerCost) {
        idleData.coins -= idleData.minerCost;
        idleData.miners += 1;
        idleData.minerCost *= 1.7;
        updateIdleDisplay();
        saveIdleData();
      } else {
        alert("Not enough coins!");
      }
    });
    document.getElementById('resetIdleButton').addEventListener('click', function() {
      if (confirm("Reset Idle Miner?")) {
        idleData = { coins: 0, clickPower: 1, miners: 0, pickaxeCost: 10, minerCost: 50 };
        updateIdleDisplay();
        saveIdleData();
      }
    });
    setInterval(() => {
      if (idleData.miners > 0) {
        idleData.coins += idleData.miners;
        updateIdleDisplay();
        saveIdleData();
      }
    }, 1000);
    loadIdleData();

    /*******************************
     * Higher/Lower Game
     *******************************/
    let hlData = { currentNumber: 0, score: 0 };
    function startHLGame() {
      hlData.currentNumber = Math.floor(Math.random() * 100) + 1;
      hlData.score = 0;
    }
    function loadHLData() {
      const saved = localStorage.getItem('hlGameData');
      if (saved) hlData = JSON.parse(saved);
      else startHLGame();
      updateHLDisplay();
    }
    function saveHLData() {
      localStorage.setItem('hlGameData', JSON.stringify(hlData));
    }
    function updateHLDisplay() {
      document.getElementById('hlCard').innerText = hlData.currentNumber;
      document.getElementById('hlScore').innerText = hlData.score;
    }
    function flipHLCard(newNumber) {
      const card = document.getElementById('hlCard');
      card.classList.add('flip');
      setTimeout(() => {
        card.innerText = newNumber;
        card.classList.remove('flip');
      }, 600);
    }
    document.getElementById('higherButton').addEventListener('click', function() {
      const next = Math.floor(Math.random() * 100) + 1;
      if (next > hlData.currentNumber) {
        hlData.score++;
        flipHLCard(next);
        hlData.currentNumber = next;
      } else {
        alert("Wrong! Game Over. Score: " + hlData.score);
        startHLGame();
      }
      updateHLDisplay();
      saveHLData();
    });
    document.getElementById('lowerButton').addEventListener('click', function() {
      const next = Math.floor(Math.random() * 100) + 1;
      if (next < hlData.currentNumber) {
        hlData.score++;
        flipHLCard(next);
        hlData.currentNumber = next;
      } else {
        alert("Wrong! Game Over. Score: " + hlData.score);
        startHLGame();
      }
      updateHLDisplay();
      saveHLData();
    });
    document.getElementById('resetHLButton').addEventListener('click', function() {
      if (confirm("Reset Higher/Lower?")) {
        startHLGame();
        updateHLDisplay();
        saveHLData();
      }
    });
    loadHLData();

    /*******************************
     * Plinko Game
     *******************************/
    const plinkoCanvas = document.getElementById('plinkoCanvas');
    const plinkoCtx = plinkoCanvas.getContext('2d');
    const plinkoWidth = plinkoCanvas.width;
    const plinkoHeight = plinkoCanvas.height;
    let plinkoScore = 0;
    let plinkoBalls = []; // active balls
    const plinkoPegs = [];
    const pegRows = 8;
    const pegSpacingX = plinkoWidth / 9;
    const pegSpacingY = 60;
    const pegRadius = 5;
    // Generate pegs in offset rows
    for (let row = 0; row < pegRows; row++) {
      let offset = (row % 2 === 0) ? pegSpacingX / 2 : 0;
      let numPegs = Math.floor(plinkoWidth / pegSpacingX);
      for (let i = 0; i < numPegs; i++) {
        plinkoPegs.push({
          x: offset + i * pegSpacingX,
          y: 50 + row * pegSpacingY,
          r: pegRadius
        });
      }
    }
    // Define bins at bottom (8 bins)
    const binCount = 8;
    const binWidth = plinkoWidth / binCount;
    // For a realistic feel, you can set multipliers manually.
    // Here we assign random multipliers except for the center bins (indices 3 and 4) which we set to 0.2.
    const binMultipliers = [];
    for (let i = 0; i < binCount; i++) {
      if (i === 3 || i === 4) {
        binMultipliers.push(0.2);
      } else {
        binMultipliers.push((Math.random() * 2 + 1).toFixed(1)); // e.g., 1.0 to 3.0
      }
    }
    function loadPlinkoScore() {
      const saved = localStorage.getItem('plinkoScore');
      if (saved) plinkoScore = parseFloat(saved);
      document.getElementById('plinkoScore').innerText = plinkoScore;
    }
    function savePlinkoScore() {
      localStorage.setItem('plinkoScore', plinkoScore);
    }
    // Ball constructor
    function Ball(x, y) {
      this.x = x;
      this.y = y;
      this.r = 8;
      this.vx = (Math.random() - 0.5) * 4;
      this.vy = 0;
    }
    // Update physics for Plinko balls
    function updatePlinko() {
      plinkoCtx.clearRect(0, 0, plinkoWidth, plinkoHeight);
      // Draw bins at bottom
      for (let i = 0; i < binCount; i++) {
        plinkoCtx.fillStyle = "#ddd";
        plinkoCtx.fillRect(i * binWidth, plinkoHeight - 30, binWidth, 30);
        plinkoCtx.fillStyle = "#333";
        plinkoCtx.font = "14px sans-serif";
        plinkoCtx.textAlign = "center";
        plinkoCtx.fillText(binMultipliers[i] + "x", i * binWidth + binWidth/2, plinkoHeight - 10);
      }
      // Draw pegs
      plinkoCtx.fillStyle = "#007acc";
      plinkoPegs.forEach(peg => {
        plinkoCtx.beginPath();
        plinkoCtx.arc(peg.x, peg.y, peg.r, 0, Math.PI * 2);
        plinkoCtx.fill();
      });
      // Update and draw balls
      for (let b = plinkoBalls.length - 1; b >= 0; b--) {
        const ball = plinkoBalls[b];
        // Apply gravity (reduced for realistic slow fall)
        ball.vy += 0.2;
        ball.x += ball.vx;
        ball.y += ball.vy;
        // Wall collision
        if (ball.x < ball.r || ball.x > plinkoWidth - ball.r) {
          ball.vx *= -1;
        }
        // Peg collisions (less bounce using 0.2 multiplier)
        plinkoPegs.forEach(peg => {
          const dx = ball.x - peg.x;
          const dy = ball.y - peg.y;
          const dist = Math.hypot(dx, dy);
          if (dist < ball.r + peg.r) {
            const angle = Math.atan2(dy, dx);
            ball.vx = Math.cos(angle) * 0.2;
            ball.vy = Math.sin(angle) * 0.2;
          }
        });
        // Draw ball
        plinkoCtx.fillStyle = "#e67e22";
        plinkoCtx.beginPath();
        plinkoCtx.arc(ball.x, ball.y, ball.r, 0, Math.PI * 2);
        plinkoCtx.fill();
        // Check if ball reached bottom bins
        if (ball.y + ball.r > plinkoHeight - 30) {
          const binIndex = Math.floor(ball.x / binWidth);
          // Multiply a base score (for example, 10) by the bin's multiplier
          plinkoScore += 10 * parseFloat(binMultipliers[binIndex]);
          document.getElementById('plinkoScore').innerText = plinkoScore.toFixed(1);
          savePlinkoScore();
          plinkoBalls.splice(b, 1);
        }
      }
      requestAnimationFrame(updatePlinko);
    }
    document.getElementById('dropBallButton').addEventListener('click', function() {
      plinkoBalls.push(new Ball(plinkoWidth/2 + (Math.random()-0.5)*50, 20));
    });
    document.getElementById('resetPlinkoButton').addEventListener('click', function() {
      if (confirm("Reset Plinko score?")) {
        plinkoScore = 0;
        document.getElementById('plinkoScore').innerText = plinkoScore;
        savePlinkoScore();
      }
    });
    loadPlinkoScore();
    updatePlinko();

    /*******************************
     * Slot Machine Game (3 Reels)
     *******************************/
    let slotBalance = 100;
    function loadSlotBalance() {
      const saved = localStorage.getItem('slotBalance');
      if (saved) slotBalance = parseInt(saved);
      updateSlotBalanceDisplay();
    }
    function saveSlotBalance() {
      localStorage.setItem('slotBalance', slotBalance);
    }
    function updateSlotBalanceDisplay() {
      document.getElementById('slotBalance').innerText = slotBalance;
    }
    const slotSymbols = ["üçí", "üçã", "üîî", "‚≠ê", "7Ô∏è‚É£", "üçÄ"];
    // Utility function to spin one reel; returns a promise that resolves with the final symbol.
    function spinReel(reelElement, duration) {
      return new Promise(resolve => {
        let interval = setInterval(() => {
          reelElement.innerText = slotSymbols[Math.floor(Math.random() * slotSymbols.length)];
        }, 100);
        setTimeout(() => {
          clearInterval(interval);
          const finalSymbol = slotSymbols[Math.floor(Math.random() * slotSymbols.length)];
          reelElement.innerText = finalSymbol;
          resolve(finalSymbol);
        }, duration);
      });
    }
    document.getElementById('spinSlotButton').addEventListener('click', async function() {
      const betInput = document.getElementById('betAmount');
      let bet = parseInt(betInput.value);
      if (isNaN(bet) || bet <= 0) { alert("Please enter a valid bet amount."); return; }
      if (bet > slotBalance) { alert("Not enough balance."); return; }
      // Deduct bet and update balance display
      slotBalance -= bet;
      updateSlotBalanceDisplay();
      saveSlotBalance();
      this.disabled = true;
      document.getElementById('slotResult').innerText = "";
      // Spin reels sequentially
      const reel1 = document.getElementById('reel1');
      const reel2 = document.getElementById('reel2');
      const reel3 = document.getElementById('reel3');
      const symbol1 = await spinReel(reel1, 1000);
      const symbol2 = await spinReel(reel2, 1500);
      const symbol3 = await spinReel(reel3, 2000);
      // Simple win condition: all three symbols match
      if (symbol1 === symbol2 && symbol2 === symbol3) {
        const winnings = bet * 5; // Payout multiplier
        slotBalance += winnings;
        document.getElementById('slotResult').innerText = "Jackpot! You win " + winnings + " coins!";
      } else {
        document.getElementById('slotResult').innerText = "Sorry, you lose.";
      }
      updateSlotBalanceDisplay();
      saveSlotBalance();
      this.disabled = false;
    });
    loadSlotBalance();
  </script>
</body>
</html>
